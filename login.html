<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<!--    <meta http-equiv="X-UA-Compatible" content="IE=edge">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
	<script src = "https://libs.baidu.com/jquery/2.0.0/jquery.js"></script>

    <title>登录</title>
	<link rel="stylesheet" href="login.css">

</head>
<body>
    <div class="login">
        <div class="box">
            <p class="table">Git CCN</p>
            <br>
            <input id="account" type="text" placeholder="账号" value="" onMouseOut="outa()">
            <input id="pwd" type="password" placeholder="密码" value="" onMouseOut="outp()">
            
            <a href="#" class="go" onclick="getValue()">登录</a>
			<a href="#" class="go" onclick="getValue()">注册</a>
			<br>
        </div>
    </div>
</body>
	<script>
	
		function outa(){
			var a = document.getElementById("account");
			a.setAttribute('value', jQuery("#account").val());
		}
		function outp(){
			var p = document.getElementById("pwd");
			p.setAttribute('value',jQuery("#pwd").val());
		}
		
		
    	function getValue() {
			var a = jQuery("#account").val();
			var p = jQuery("#pwd").val();
			// 发送AJAX POST请求
            // 1. 创建AJAX核心对象
            var xhr = new XMLHttpRequest();
            // 2. 注册回调函数
            xhr.onreadystatechange = function (){
                if (this.readyState == 4) {
                    if (this.status == 200) {
						var res = xhr.responseText;
						var obj = JSON.parse(res);
						if(obj.code==1){
							alert("success");
//							window.location.href="https://www.bilibili.com";
						}
						else{
							alert("false");
						}
//						if(res=="true"){
//							alert("success");
//							window.location.href="https://www.bilibili.com";
//						}
//						else{
//							alert("false");
//						}
                    }else{
                        alert(this.status);
						fail&&fail(newError('接口请求失败'));
                    }
                }
            }
            // 3. 开启通道
            xhr.open("POST", "/login", true)
 			xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded")
			xhr.send("username="+a+"&password="+p)
            // 4. 发送请求
            xhr.send()
		}
            
	</script>
</html>